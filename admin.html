<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Admin Panel â€” Herbaprima</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="assets/css/style.css">
<style>
  .admin-card {background:#fff;padding:24px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,.06);max-width:480px;margin:40px auto;}
  input, select {width:100%;padding:10px;margin:6px 0;border-radius:8px;border:1px solid #aaa;}
  table {width:100%;margin-top:20px;border-collapse:collapse}
  th, td {padding:12px;border-bottom:1px solid #ddd;text-align:left}
  .btn-sm {padding:6px 10px;border-radius:6px;font-size:12px}
</style>
</head>
<body>

<main class="container" style="padding:40px 0">

  <div id="loginPanel" class="admin-card">
    <h2>Login Admin</h2>
    <p class="small">Masukkan username dan password admin.</p>

    <label>Username</label>
    <input type="text" id="adminUser">

    <label>Password</label>
    <input type="password" id="adminPass">

    <button class="btn green" style="width:100%;margin-top:10px" onclick="loginAdmin()">Login</button>
  </div>

  <div id="adminPanel" style="display:none">
    <h1>Kelola Produk</h1>

    <div class="admin-card">
      <h3>Tambah / Edit Produk</h3>

      <input type="hidden" id="editId">

      <label>Nama Produk</label>
      <input type="text" id="pName">

      <label>Kategori</label>
      <select id="pCat">
        <option>Minuman Sehat</option>
        <option>Madu Premium</option>
        <option>Minyak Herba</option>
        <option>Aneka Herbal</option>
        <option>Perawatan Kulit</option>
        <option>Perawatan Pribadi</option>
      </select>

      <label>Harga</label>
      <input type="number" id="pPrice">

      <label>URL Gambar</label>
      <input type="text" id="pImg">

      <label>Upload Gambar</label>
      <input type="file" id="pImgFile" accept="image/*">

      <div style="margin-top:12px;display:flex;gap:8px">
        <button class="btn green" style="width:100%;margin-top:10px" onclick="saveProduct()">Simpan Produk</button>
      </div>
    </div>

    <h2>Daftar Produk</h2>
    <table>
      <thead>
        <tr><th>Nama</th><th>Kategori</th><th>Harga</th><th>Aksi</th></tr>
      </thead>
      <tbody id="prodTable"></tbody>
    </table>

    <button onclick="logoutAdmin()" class="btn outline" style="margin-top:20px">Logout</button>
  </div>

</main>

<script>
if(!localStorage.getItem("adminUser")){
    localStorage.setItem("adminUser", "admin");
    localStorage.setItem("adminPass", "herbaprima123");
}
function loginAdmin(){
    const u = document.getElementById("adminUser").value;
    const p = document.getElementById("adminPass").value;
    if(u === localStorage.getItem("adminUser") && p === localStorage.getItem("adminPass")){
        localStorage.setItem("logged_in", true);
        showAdmin();
    } else {
        alert("Username atau password salah!");
    }
}
function showAdmin(){
    document.getElementById("loginPanel").style.display = "none";
    document.getElementById("adminPanel").style.display = "block";
    loadProducts();
}
function logoutAdmin(){
    localStorage.removeItem("logged_in");
    location.reload();
}
if(localStorage.getItem("logged_in")){
    showAdmin();
}
if(!localStorage.getItem("localProducts")){
    localStorage.setItem("localProducts", JSON.stringify([]));
}
function loadProducts(){
    const data = JSON.parse(localStorage.getItem("localProducts"));
    let html = "";
    data.forEach((p,i)=>{
        html += `
          <tr>
            <td>${p.name}</td>
            <td>${p.category}</td>
            <td>Rp ${p.price.toLocaleString()}</td>
            <td>
              <button class="btn-sm green" onclick="editProduct(${i})">Edit</button>
              <button class="btn-sm outline" onclick="deleteProduct(${i})">Hapus</button>
            </td>
          </tr>`;
    });
    document.getElementById("prodTable").innerHTML = html;
}
function saveProduct(){
    const id = document.getElementById("editId").value;
    const name = document.getElementById("pName").value;
    const cat = document.getElementById("pCat").value;
    const price = document.getElementById("pPrice").value;
    const img = document.getElementById("pImg").value;
    let data = JSON.parse(localStorage.getItem("localProducts"));
    if(id){ data[id] = {name, category:cat, price, image:img}; }
    else { data.push({name, category:cat, price, image:img}); }
    localStorage.setItem("localProducts", JSON.stringify(data));
    alert("Produk disimpan!");
    clearForm();
    loadProducts();
}
function editProduct(i){
    const p = JSON.parse(localStorage.getItem("localProducts"))[i];
    document.getElementById("editId").value = i;
    document.getElementById("pName").value = p.name;
    document.getElementById("pCat").value = p.category;
    document.getElementById("pPrice").value = p.price;
    document.getElementById("pImg").value = p.image;
    window.scrollTo({top:0, behavior:'smooth'});
}
function deleteProduct(i){
    if(confirm("Hapus produk ini?")){
        let data = JSON.parse(localStorage.getItem("localProducts"));
        data.splice(i,1);
        localStorage.setItem("localProducts", JSON.stringify(data));
        loadProducts();
    }
}
function clearForm(){
    document.getElementById("editId").value = "";
    document.getElementById("pName").value = "";
    document.getElementById("pPrice").value = "";
    document.getElementById("pImg").value = "";
}
</script>

</body>
</html>
